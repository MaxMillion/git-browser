{"refs":{"refs/heads/master":"e37c5b9a28c8a59386d58253235aaa4b383297e9"},"objects":{"e37c5b9a28c8a59386d58253235aaa4b383297e9":{"type":"commit","body":{"tree":"89f1e01e4c0f9b3b1d8b734e2c0187e1860bb092","author":"Tim Caswell <tim@creationix.com> 1367448117 -0500","committer":"Tim Caswell <tim@creationix.com> 1367448117 -0500","message":"Initial Commit\n"}},"89f1e01e4c0f9b3b1d8b734e2c0187e1860bb092":{"type":"tree","body":[{"mode":33188,"name":"README.md","hash":"e69de29bb2d1d6434b8b29ae775ad8c2e48c5391"},{"mode":33188,"name":"mine.js","hash":"54c75f921162128901ea556e10d06130e21f045c"},{"mode":33188,"name":"package.json","hash":"3d7367dee9a0785db04c38051bb38242051623f7"}]},"e69de29bb2d1d6434b8b29ae775ad8c2e48c5391":{"type":"blob","body":""},"54c75f921162128901ea556e10d06130e21f045c":{"type":"blob","body":"// Mine a string for require calls and export the module names\n// Extract all require calls using a proper state-machine parser.\nmodule.exports = function mine(js) {\n  var names = [];\n  var state = 0;\n  var ident;\n  var quote;\n  var name;\n  var states = [\n    // 0 - START\n    function (char) {\n      if (char === \"/\") state = 6;\n      else if (char === \"'\" || char === '\"') {\n        quote = char;\n        state = 4;\n      }\n      else if (char === \"r\") {\n        ident = char;\n        state = 1;\n      }\n    },\n    // 1 - IDENT\n    function (char) {\n      if (char === \"require\"[ident.length]) {\n        ident += char;\n      }\n      else if (char === \"(\" && ident === \"require\") {\n        ident = undefined;\n        state = 2;\n      }\n      else {\n        state = 0;\n      }\n    },\n    // 2 - CALL\n    function (char) {\n      if (char === \"'\" || char === '\"') {\n        quote = char;\n        name = \"\";\n        state = 3;\n      }\n      else {\n        state = 0;\n      }\n    },\n    // 3 - NAME\n    function (char) {\n      if (char === quote) {\n        names.push(name);\n        name = undefined;\n        state = 0;\n      }\n      else {\n        name += char;\n      }\n    },\n    // 4 - STRING\n    function (char) {\n      if (char === \"\\\\\") {\n        state = 5;\n      }\n      else if (char === quote) {\n        state = 0;\n      }\n    },\n    // 5 - ESCAPE\n    function (char) {\n      state = 4;\n    },\n    // 6 - SLASH\n    function (char) {\n      if (char === \"/\") state = 7;\n      else if (char === \"*\") state = 8;\n      else state = 0;\n    },\n    // 7 - LINE_COMMENT\n    function (char) {\n      if (char === \"\\r\" || char === \"\\n\") state = 0;\n    },\n    // 8 - MULTILINE_COMMENT\n    function (char) {\n      if (char === \"*\") state = 9;\n    },\n    // 9 - MULTILINE_ENDING\n    function (char) {\n      if (char === \"/\") state = 0;\n      else if (char !== \"*\") state = 8;\n    }\n  ];\n  for (var i = 0, l = js.length; i < l; i++) {\n    states[state](js[i]);\n  }\n  return names;\n}\n"},"3d7367dee9a0785db04c38051bb38242051623f7":{"type":"blob","body":"{\n  \"name\": \"mine\",\n  \"version\": \"0.0.0\",\n  \"description\": \"Digs into a javascript file looking for require calls. Used to statically extract common js dependencies.\",\n  \"main\": \"mine.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/creationix/miner.git\"\n  },\n  \"author\": \"Tim Caswell <tim@creationix.com>\",\n  \"license\": \"MIT\",\n  \"readmeFilename\": \"README.md\"\n}\n"}}}